<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
    <channel>
        <title>Wachunga</title>
        <link>http://127.0.0.1/</link>
        <description>Notes and ramblings on hacking and finance</description>
        <language>en-us</language>
        <pubDate>Mon, 13 Jan 2014 00:00:00 +0000</pubDate>
        
        <item>
            <link>http://127.0.0.1/2014/01/13/remember_vim_folding.html</link>
            <guid>http://127.0.0.1/2014/01/13/remember_vim_folding.html</guid>
            <title><![CDATA[Remember Vim folding]]></title>
            <description><![CDATA[<div class="section" id="remember-vim-folding">
<h1>Remember Vim folding</h1>
<table border="1" class="docutils">
<colgroup>
<col width="11%"/>
<col width="89%"/>
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Key</th>
<th class="head">Operation</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>zO</td>
<td>Open all folds recursivley</td>
</tr>
<tr class="row-odd"><td>zo</td>
<td>Open one fold</td>
</tr>
<tr class="row-even"><td>zc</td>
<td>Close one fold</td>
</tr>
<tr class="row-odd"><td>zC</td>
<td>Close all folds recursivley</td>
</tr>
<tr class="row-even"><td>za</td>
<td>Toggle fold</td>
</tr>
<tr class="row-odd"><td>zA</td>
<td>Toggle fold recursivley</td>
</tr>
<tr class="row-even"><td>zR</td>
<td>Open all folds</td>
</tr>
<tr class="row-odd"><td>zM</td>
<td>Close all folds</td>
</tr>
</tbody>
</table>
<p>Then i set the following in .vimrc:</p>
<div class="highlight-python"><pre>&quot; folding
&quot; toggle open fold
nnoremap f zA
&quot; open all
nnoremap F zR
&quot; clos all
nnoremap &lt;C-f&gt; zM</pre>
</div>
</div>]]></description>
             <pubDate>Mon, 13 Jan 2014 00:00:00 +0000</pubDate>
        </item>
    
        <item>
            <link>http://127.0.0.1/2014/01/05/being_productive_with_ipython_notebooks.html</link>
            <guid>http://127.0.0.1/2014/01/05/being_productive_with_ipython_notebooks.html</guid>
            <title><![CDATA[Being even more productive with IPython notebooks]]></title>
            <description><![CDATA[<div class="section" id="being-even-more-productive-with-ipython-notebooks">
<h1>Being even more productive with IPython notebooks</h1>
<p>IPython notebooks are an awesome tool for exploring data. Currently there are a
few issues with the software which the community are working through.</p>
<div class="section" id="slides">
<h2>Slides</h2>
<p>Particularly useful is the ability to be able to create slides from your
notebooks using reveal.js:</p>
<div class="highlight-bash"><div class="highlight"><pre>python3 nbconvert --to slides BeigeBook.ipynb --post serve
</pre></div>
</div>
<p>But we need to follow these steps in order for the formatting to work
correctly:</p>
<ol class="arabic simple">
<li>Add this custom.css file: <a class="reference external" href="https://gist.github.com/damianavila/6211198">https://gist.github.com/damianavila/6211198</a></li>
<li>Run this little snippet: <a class="reference external" href="https://gist.github.com/damianavila/6211211">https://gist.github.com/damianavila/6211211</a></li>
<li>Add ?print.pdf to the end of the url</li>
<li>Print to pdf, use Landscape orientation</li>
</ol>
</div>
<div class="section" id="git">
<h2>Git</h2>
<p>The JSON format of IPython notebooks is create, however there is no need to save Base64 encoded binary data in Git. We can strip out the binary blobs with Git filters.  Add the following somewhere on your path: <a class="reference external" href="https://github.com/cfriedline/ipynb_template/blob/master/nbstripout">https://github.com/cfriedline/ipynb_template/blob/master/nbstripout</a>, then add the following in <span class="docutils literal"><span class="pre">.git/config</span></span>:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="o">[</span>filter <span class="s2">&quot;stripoutput&quot;</span><span class="o">]</span>
    <span class="nv">clean</span> <span class="o">=</span> <span class="s2">&quot;/path/to/nbstripout&quot;</span>
</pre></div>
</div>
<p>And a <span class="docutils literal"><span class="pre">.gitattributes</span></span> file in your project root with the following contents:</p>
<div class="highlight-bash"><div class="highlight"><pre>*.ipynb <span class="nv">filter</span><span class="o">=</span>stripoutput
</pre></div>
</div>
<p>You will not notice any changes to your local <span class="docutils literal"><span class="pre">.ipynb</span></span> file when you commit (as the content is being filtered, not replaced as a pre-commit hook would do). Once committed, delete the file and checkout again and you will see a <span class="docutils literal"><span class="pre">.ipynb</span></span> file sans output. Also the numbering of cells will start continuously from 1 - great!</p>
</div>
</div>]]></description>
             <pubDate>Sun, 05 Jan 2014 00:00:00 +0000</pubDate>
        </item>
    
        <item>
            <link>http://127.0.0.1/2014/01/03/setup_matlab.html</link>
            <guid>http://127.0.0.1/2014/01/03/setup_matlab.html</guid>
            <title><![CDATA[Setting up MATLAB contexts]]></title>
            <description><![CDATA[<div class="section" id="setting-up-matlab-contexts">
<h1>Setting up MATLAB contexts</h1>
<p>If you are forced to use MATLAB (here’s a whole blog devoted to the topic of
why not to use it <a class="reference external" href="http://abandonmatlab.wordpress.com">http://abandonmatlab.wordpress.com/</a>) the following advice
maybe useful for easily managing your path and hence creating contexts of work.</p>
<p>In cases where Administrator privileges are not held, the following config. is
flexible.</p>
<p>Define MATLAB’s <span class="docutils literal"><span class="pre">userpath</span></span> to be a user writeable directory. This is the initial
directory MATLAB will parse.</p>
<p>Within the <span class="docutils literal"><span class="pre">userpath</span></span> create <span class="docutils literal"><span class="pre">startup.m</span></span>:</p>
<div class="highlight-matlab"><div class="highlight"><pre><span class="k">if</span> <span class="o">~</span><span class="n">isdeployed</span>
    <span class="n">path</span><span class="p">(</span><span class="n">my_path</span><span class="p">)</span>
    <span class="n">set_vars</span>
</pre></div>
</div>
<p>Where <span class="docutils literal"><span class="pre">my_path</span></span> is a matlab file which sets the path like:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">function</span> <span class="n">p</span> <span class="o">=</span> <span class="n">my_path</span>
     <span class="n">p</span> <span class="o">=</span> <span class="p">[</span><span class="s">'/home/chris/matlab;'</span><span class="p">,</span> <span class="s">'/home/chris/important;'</span><span class="p">];</span>
     <span class="n">cd</span><span class="p">(</span><span class="s">'/home/chris/matlab'</span><span class="p">);</span>
<span class="n">end</span>
</pre></div>
</div>
<p>So we set the path and cd to a relevant directory. Also in the userpath folder,
one can keep many files like <span class="docutils literal"><span class="pre">my_path.m</span></span>, which define different contexts to
work in, making changing contexts as easy as:</p>
<div class="highlight-matlab"><div class="highlight"><pre><span class="n">path</span><span class="p">(</span><span class="n">my_other_path</span><span class="p">)</span>
</pre></div>
</div>
<p>Whithin each context <span class="docutils literal"><span class="pre">path</span></span> file if you also call the <span class="docutils literal"><span class="pre">set_vars</span></span> script,
this allows <span class="docutils literal"><span class="pre">set_vars</span></span> to contain useful variables e.g. paths to output
directories and the like.</p>
</div>]]></description>
             <pubDate>Fri, 03 Jan 2014 00:00:00 +0000</pubDate>
        </item>
    
        <item>
            <link>http://127.0.0.1/2013/05/01/common_operations_in_pandas.html</link>
            <guid>http://127.0.0.1/2013/05/01/common_operations_in_pandas.html</guid>
            <title><![CDATA[Common operations in Pandas]]></title>
            <description><![CDATA[<div class="section" id="common-operations-in-pandas">
<h1>Common operations in Pandas</h1>
<p>If you munge data in Python then you really should be using <a class="reference external" href="http://pandas.pydata.org">Pandas</a>. These are some notes about common operations.</p>
<div class="section" id="hierachical-index">
<h2>Hierachical index</h2>
<p>Given a set of data like this (refered to as Table A):</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="36%"/>
<col width="16%"/>
<col width="16%"/>
<col width="16%"/>
<col width="17%"/>
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"> </th>
<th class="head">Bid</th>
<th class="head">Mid</th>
<th class="head">Offer</th>
<th class="head">Variable</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1994-01-03 16:00:00</td>
<td>0.9980</td>
<td>0.9981</td>
<td>0.9981</td>
<td>ARS</td>
</tr>
<tr class="row-odd"><td>1994-01-03 16:00:00</td>
<td>12.2190</td>
<td>12.2215</td>
<td>12.2240</td>
<td>ATS</td>
</tr>
<tr class="row-even"><td>1994-01-03 16:00:00</td>
<td>0.6835</td>
<td>0.6838</td>
<td>0.6840</td>
<td>AUD</td>
</tr>
<tr class="row-odd"><td>1994-01-03 16:00:00</td>
<td>39.0000</td>
<td>39.0000</td>
<td>39.0000</td>
<td>BDT</td>
</tr>
<tr class="row-even"><td>1994-01-03 16:00:00</td>
<td>36.2060</td>
<td>36.2425</td>
<td>36.2790</td>
<td>BEF</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>It often makes more sense to represent it as a hierachical index (referred to as Table B), e.g.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="36%"/>
<col width="17%"/>
<col width="16%"/>
<col width="16%"/>
<col width="16%"/>
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"> </th>
<th class="head"> </th>
<th class="head">Bid</th>
<th class="head">Mid</th>
<th class="head">Offer</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>index</td>
<td>Variable</td>
<td> </td>
<td> </td>
<td> </td>
</tr>
<tr class="row-odd"><td>1994-01-03 16:00:00</td>
<td>ARS</td>
<td>0.9980</td>
<td>0.9981</td>
<td>0.9981</td>
</tr>
<tr class="row-even"><td> </td>
<td>ATS</td>
<td>12.2190</td>
<td>12.2215</td>
<td>12.2240</td>
</tr>
<tr class="row-odd"><td> </td>
<td>AUD</td>
<td>0.6835</td>
<td>0.6838</td>
<td>0.6840</td>
</tr>
<tr class="row-even"><td> </td>
<td>BDT</td>
<td>39.0000</td>
<td>39.0000</td>
<td>39.0000</td>
</tr>
<tr class="row-odd"><td> </td>
<td>BEF</td>
<td>36.2060</td>
<td>36.2425</td>
<td>36.2790</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>This can be done for a pandas.DataFrame <span class="docutils literal"><span class="pre">df</span></span> like so</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s">'index'</span><span class="p">,</span> <span class="s">'Variable'</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="section" id="subset-of-columns-and-a-pivot">
<h2>Subset of columns and a pivot</h2>
<p>Consider again Table A above loaded as <span class="docutils literal"><span class="pre">df</span></span>, if we wish to filter out a
subset of values in the <span class="docutils literal"><span class="pre">Variable</span></span> column, and consider the <span class="docutils literal"><span class="pre">Mid</span></span> values
only for then we can do the following to have a continuous time series:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">g10_set</span> <span class="o">=</span> <span class="p">[</span>
<span class="s">'USD'</span><span class="p">,</span> <span class="s">'EUR'</span><span class="p">,</span> <span class="s">'JPY'</span><span class="p">,</span> <span class="s">'CHF'</span><span class="p">,</span> <span class="s">'GBP'</span><span class="p">,</span> <span class="s">'AUD'</span><span class="p">,</span> <span class="s">'CAD'</span><span class="p">,</span> <span class="s">'SEK'</span><span class="p">,</span>
<span class="s">'NOK'</span><span class="p">,</span> <span class="s">'NZD'</span>
<span class="p">]</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s">'Variable'</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">g10_set</span><span class="p">)]</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span>
    <span class="n">index</span><span class="o">=</span><span class="s">'index'</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s">'Variable'</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s">'Mid'</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Which results in Table C:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="26%"/>
<col width="10%"/>
<col width="10%"/>
<col width="10%"/>
<col width="6%"/>
<col width="10%"/>
<col width="11%"/>
<col width="10%"/>
<col width="7%"/>
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Variable</th>
<th class="head">AUD</th>
<th class="head">CAD</th>
<th class="head">CHF</th>
<th class="head">EUR</th>
<th class="head">GBP</th>
<th class="head">JPY</th>
<th class="head">NOK</th>
<th class="head"> </th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>index</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
</tr>
<tr class="row-odd"><td>1994-01-03 16:00:00</td>
<td>0.6838</td>
<td>1.3143</td>
<td>1.4827</td>
<td>NaN</td>
<td>1.4805</td>
<td>112.395</td>
<td>7.5251</td>
<td> </td>
</tr>
<tr class="row-even"><td>1994-01-04 16:00:00</td>
<td>0.6848</td>
<td>1.3164</td>
<td>1.4861</td>
<td>NaN</td>
<td>1.4819</td>
<td>113.155</td>
<td>7.5259</td>
<td> </td>
</tr>
<tr class="row-odd"><td>1994-01-05 16:00:00</td>
<td>0.6873</td>
<td>1.3153</td>
<td>1.4800</td>
<td>NaN</td>
<td>1.4864</td>
<td>112.760</td>
<td>7.5020</td>
<td> </td>
</tr>
<tr class="row-even"><td>1994-01-06 16:00:00</td>
<td>0.6843</td>
<td>1.3220</td>
<td>1.4745</td>
<td>NaN</td>
<td>1.4880</td>
<td>112.555</td>
<td>7.4903</td>
<td> </td>
</tr>
<tr class="row-odd"><td>1994-01-07 16:00:00</td>
<td>0.6868</td>
<td>1.3225</td>
<td>1.4705</td>
<td>NaN</td>
<td>1.4905</td>
<td>111.825</td>
<td>7.4865</td>
<td> </td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="other">
<h2>Other</h2>
<ul class="simple">
<li>Find row where value of column is max: <span class="docutils literal"><span class="pre">df['AUD'].argmax()</span></span></li>
</ul>
</div>
</div>]]></description>
             <pubDate>Wed, 01 May 2013 00:00:00 +0100</pubDate>
        </item>
    
    </channel>
</rss>